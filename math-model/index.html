
<!DOCTYPE html>

<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://www.drlx.com/math-model/" rel="canonical"/>
<link href="../eec/" rel="prev"/>
<link href="../manual/getting-started/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.7" name="generator"/>
<title>The PowerModels Mathematical Model - Deep Reinforcement Learning</title>
<link href="../assets/stylesheets/main.558e4712.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../css/extra.css" rel="stylesheet"/>
<link href="../css/hint.min.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="light-blue" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#the-powermodels-mathematical-model">
          跳转至
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="页眉" class="md-header__inner md-grid">
<a aria-label="Deep Reinforcement Learning" class="md-header__button md-logo" data-md-component="logo" href=".." title="Deep Reinforcement Learning">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Deep Reinforcement Learning
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              The PowerModels Mathematical Model
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="red" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="搜索" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="搜索" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="查找" class="md-search__options">
<button aria-label="清空当前内容" class="md-search__icon md-icon" tabindex="-1" title="清空当前内容" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
<nav aria-label="标签" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
      Home
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../stability/2022/">
        专题分析
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../eec/">
      EEC
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="./">
        PowerModule
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../manual/getting-started/">
        Julia
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../markdown/figure/">
        Help
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../about/">
      About
    </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="导航栏" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Deep Reinforcement Learning" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Deep Reinforcement Learning">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Deep Reinforcement Learning
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          专题分析
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          专题分析
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../stability/2022/">
        建苏直流
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../stability/GBT40615/">
        电力系统电压稳定评价导则
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../eec/">
        EEC
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          PowerModule
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          PowerModule
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          The PowerModels Mathematical Model
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        The PowerModels Mathematical Model
      </a>
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#sets-and-parameters">
    Sets and Parameters
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ac-optimal-power-flow">
    AC Optimal Power Flow
  </a>
<nav aria-label="AC Optimal Power Flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mapping-to-powermodels-functions">
    Mapping to PowerModels Functions
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ac-optimal-power-flow-for-the-branch-flow-model">
    AC Optimal Power Flow for the Branch Flow Model
  </a>
<nav aria-label="AC Optimal Power Flow for the Branch Flow Model" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mapping-to-powermodels-functions_1">
    Mapping to PowerModels Functions
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ac-optimal-power-flow-in-current-voltage-variables">
    AC Optimal Power Flow in Current-Voltage Variables
  </a>
<nav aria-label="AC Optimal Power Flow in Current-Voltage Variables" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mapping-to-powermodels-functions_2">
    Mapping to PowerModels Functions
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Julia
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Julia
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../manual/getting-started/">
        入门
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../manual/variables/">
        变量
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../manual/variables-and-scoping/">
        变量作用域
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../manual/functions/">
        函数
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../manual/unicode-input/">
        Unicode输入表
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Help
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Help
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../markdown/figure/">
        增加图表
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../markdown/common/">
        常用扩展
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../markdown/txtbar/">
        进度条
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../about/">
        About
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="the-powermodels-mathematical-model">The PowerModels Mathematical Model<a class="headerlink" href="#the-powermodels-mathematical-model" title="Permanent link">¶</a></h1>
<p>As PowerModels implements a variety of power network optimization problems, the implementation is the best reference for precise mathematical formulations.  This section provides a complex number based mathematical specification for a prototypical AC Optimal Power Flow problem, to provide an overview of the typical mathematical models in PowerModels.</p>
<h2 id="sets-and-parameters">Sets and Parameters<a class="headerlink" href="#sets-and-parameters" title="Permanent link">¶</a></h2>
<p>PowerModels implements a slightly generalized version of the AC Optimal Power Flow problem from <a href="http://www.pserc.cornell.edu/matpower/">Matpower</a>.  These generalizations make it possible for PowerModels to more accurately capture industrial transmission network datasets.  The core generalizations are,</p>
<ul>
<li>Support for multiple load (<span class="arithmatex">\(S^d_k\)</span>) and shunt (<span class="arithmatex">\(Y^s_{k}\)</span>) components on each bus <span class="arithmatex">\(i\)</span></li>
<li>Line charging that supports a conductance and asymmetrical values (<span class="arithmatex">\(Y^c_{ij}, Y^c_{ji}\)</span>)</li>
</ul>
<div class="arithmatex">\[
x^2 + y^2 = z^2
\]</div>
<div class="arithmatex">\[
\begin{align}
%
\mbox{sets:} &amp; \nonumber \\
&amp; N \mbox{ - buses}\nonumber \\
&amp; R \mbox{ - reference buses}\nonumber \\
&amp; E, E^R \mbox{ - branches, forward and reverse orientation} \nonumber \\
&amp; G, G_i \mbox{ - generators and generators at bus $i$} \nonumber \\
&amp; L, L_i \mbox{ - loads and loads at bus $i$} \nonumber \\
&amp; S, S_i \mbox{ - shunts and shunts at bus $i$} \nonumber \\
%
\mbox{data:} &amp; \nonumber \\
&amp; S^{gl}_k, S^{gu}_k \;\; \forall k \in G \nonumber \mbox{ - generator complex power bounds}\\
&amp; c_{2k}, c_{1k}, c_{0k} \;\; \forall k \in G \nonumber  \mbox{ - generator cost components}\\
&amp; v^l_i, v^u_i \;\; \forall i \in N \nonumber \mbox{ - voltage bounds}\\
&amp; S^d_k \;\; \forall k \in L \nonumber \mbox{ - load complex power consumption}\\
&amp; Y^s_{k} \;\; \forall k \in S \nonumber \mbox{ - bus shunt admittance}\\
&amp; Y_{ij}, Y^c_{ij}, Y^c_{ji} \;\; \forall (i,j) \in E \nonumber \mbox{ - branch pi-section parameters}\\
&amp; {T}_{ij} \;\; \forall (i,j) \in E \nonumber \mbox{ - branch complex transformation ratio}\\
&amp; s^u_{ij}  \;\; \forall (i,j) \in E \nonumber \mbox{ - branch apparent power limit}\\
&amp; i^u_{ij}  \;\; \forall (i,j) \in E \nonumber \mbox{ - branch current limit}\\
&amp; \theta^{\Delta l}_{ij}, \theta^{\Delta u}_{ij} \;\; \forall (i,j) \in E \nonumber \mbox{ - branch voltage angle difference bounds}\\
%
\end{align}
\]</div>
<h2 id="ac-optimal-power-flow">AC Optimal Power Flow<a class="headerlink" href="#ac-optimal-power-flow" title="Permanent link">¶</a></h2>
<p>A complete mathematical model is as follows,</p>
<div class="arithmatex">\[
\begin{align}
%
\mbox{variables: } &amp; \nonumber \\
&amp; S^g_k \;\; \forall k\in G \mbox{ - generator complex power dispatch} \label{var_generation}\\
&amp; V_i \;\; \forall i\in N \label{var_voltage} \mbox{ - bus complex voltage}\\
&amp; S_{ij} \;\; \forall (i,j) \in E \cup E^R  \label{var_complex_power} \mbox{ - branch complex power flow}\\
%
\mbox{minimize: } &amp; \sum_{k \in G} c_{2k} (\Re(S^g_k))^2 + c_{1k}\Re(S^g_k) + c_{0k} \label{eq_objective}\\
%
\mbox{subject to: } &amp; \nonumber \\
&amp; \angle V_{r} = 0  \;\; \forall r \in R \label{eq_ref_bus}\\
&amp; S^{gl}_k \leq S^g_k \leq S^{gu}_k \;\; \forall k \in G  \label{eq_gen_bounds}\\
&amp; v^l_i \leq |V_i| \leq v^u_i \;\; \forall i \in N \label{eq_voltage_bounds}\\
&amp; \sum_{\substack{k \in G_i}} S^g_k - \sum_{\substack{k \in L_i}} S^d_k - \sum_{\substack{k \in S_i}} (Y^s_k)^* |V_i|^2 = \sum_{\substack{(i,j)\in E_i \cup E_i^R}} S_{ij} \;\; \forall i\in N \label{eq_kcl_shunt} \\
&amp; S_{ij} = \left( Y_{ij} + Y^c_{ij}\right)^* \frac{|V_i|^2}{|{T}_{ij}|^2} - Y^*_{ij} \frac{V_i V^*_j}{{T}_{ij}} \;\; \forall (i,j)\in E \label{eq_power_from}\\
&amp; S_{ji} = \left( Y_{ij} + Y^c_{ji} \right)^* |V_j|^2 - Y^*_{ij} \frac{V^*_i V_j}{{T}^*_{ij}} \;\; \forall (i,j)\in E \label{eq_power_to}\\
&amp; |S_{ij}| \leq s^u_{ij} \;\; \forall (i,j) \in E \cup E^R \label{eq_thermal_limit}\\
&amp; |I_{ij}| \leq i^u_{ij} \;\; \forall (i,j) \in E \cup E^R \label{eq_current_limit}\\
&amp; \theta^{\Delta l}_{ij} \leq \angle (V_i V^*_j) \leq \theta^{\Delta u}_{ij} \;\; \forall (i,j) \in E \label{eq_angle_difference}
%
\end{align}
\]</div>
<p>Note that for clarity of this presentation some model variants that PowerModels supports have been omitted (e.g. piecewise linear cost functions and HVDC lines).  Details about these variants is available in the <a href="http://www.pserc.cornell.edu/matpower/">Matpower</a> documentation.</p>
<h3 id="mapping-to-powermodels-functions">Mapping to PowerModels Functions<a class="headerlink" href="#mapping-to-powermodels-functions" title="Permanent link">¶</a></h3>
<ul>
<li>Eq. <span class="arithmatex">\(\eqref{var_generation}\)</span> - <a href="@ref"><code class="highlight"><span class="n">variable_gen_power</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{var_voltage}\)</span> - <a href="@ref"><code class="highlight"><span class="n">variable_bus_voltage</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{var_complex_power}\)</span> - <a href="@ref"><code class="highlight"><span class="n">variable_branch_power</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_objective}\)</span> - <a href="@ref"><code class="highlight">objective_min_fuel_cost</code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_ref_bus}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_theta_ref</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_gen_bounds}\)</span> - bounds of <a href="@ref"><code class="highlight"><span class="n">variable_gen_power</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_voltage_bounds}\)</span> - bounds of <a href="@ref"><code class="highlight"><span class="n">variable_bus_voltage</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_kcl_shunt}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_power_balance</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_power_from}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_ohms_yt_from</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_power_to}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_ohms_yt_to</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_thermal_limit}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_thermal_limit_from</span></code></a> and <a href="@ref"><code class="highlight"><span class="n">constraint_thermal_limit_to</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_current_limit}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_current_limit</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_angle_difference}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_voltage_angle_difference</span></code></a></li>
</ul>
<h2 id="ac-optimal-power-flow-for-the-branch-flow-model">AC Optimal Power Flow for the Branch Flow Model<a class="headerlink" href="#ac-optimal-power-flow-for-the-branch-flow-model" title="Permanent link">¶</a></h2>
<p>The same assumptions apply as before. The series impedance is <span class="arithmatex">\(Z_{ij}=(Y_{ij})^{-1}\)</span>.
In comparison  with the BIM, a new variable <span class="arithmatex">\(I^{s}_{ij}\)</span>, representing the current in the direction <span class="arithmatex">\(i\)</span> to <span class="arithmatex">\(j\)</span>, through the series part of the pi-section, is introduced.
A complete mathematical formulation for a Branch Flow Model is conceived as:</p>
<div class="arithmatex">\[
\begin{align}
%
\mbox{variables: } &amp; \nonumber \\
&amp; S^g_k \;\; \forall k\in G \nonumber \\
&amp; V_i \;\; \forall i\in N \nonumber \\
&amp; S_{ij} \;\; \forall (i,j) \in E \cup E^R \nonumber \\
&amp; I^{s}_{ij} \;\; \forall (i,j) \in E \cup E^R \label{var_branch_current}  \mbox{ - branch complex (series) current}\\
%
\mbox{minimize: } &amp; \sum_{k \in G} c_{2k} (\Re(S^g_k))^2 + c_{1k}\Re(S^g_k) + c_{0k} \nonumber\\
%
\mbox{subject to: } &amp; \nonumber \\
&amp; \angle V_{r} = 0  \;\; \forall r \in R \nonumber \\
&amp; S^{gl}_k \leq S^g_k \leq S^{gu}_k \;\; \forall k \in G \nonumber \\
&amp; v^l_i \leq |V_i| \leq v^u_i \;\; \forall i \in N \nonumber\\
&amp; \sum_{\substack{k \in G_i}} S^g_k - \sum_{\substack{k \in L_i}} S^d_k - \sum_{\substack{k \in S_i}} (Y^s_k)^* |V_i|^2 = \sum_{\substack{(i,j)\in E_i \cup E_i^R}} S_{ij} \;\; \forall i\in N \nonumber\\
&amp; S_{ij} +  S_{ji} = \left(Y^c_{ij}\right)^* \frac{|V_i|^2}{|{T}_{ij}|^2} + Z_{ij} |I^{s}_{ij}|^2 +  \left(Y^c_{ji}\right)^* {|V_j|^2}  \;\; \forall (i,j)\in E \label{eq_line_losses} \\
&amp; S_{ij} = S^{s}_{ij} + \left(Y^c_{ij}\right)^* \frac{|V_i|^2}{|{T}_{ij}|^2}  \;\; \forall (i,j)\in E \label{eq_series_power_flow} \\
&amp; S^{s}_{ij} = \frac{V_i}{{T}_{ij}} (I^{s}_{ij})^*  \;\; \forall (i,j)\in E \label{eq_complex_power_definition} \\
&amp; \frac{V_i}{{T}_{ij}} = V_j + z_{ij} I^{s}_{ij}  \;\; \forall (i,j)\in E \label{eq_ohms_bfm} \\
&amp; |S_{ij}| \leq s^u_{ij} \;\; \forall (i,j) \in E \cup E^R \nonumber\\
&amp; |I_{ij}| \leq i^u_{ij} \;\; \forall (i,j) \in E \cup E^R \nonumber\\
&amp; \theta^{\Delta l}_{ij} \leq \angle (V_i V^*_j) \leq \theta^{\Delta u}_{ij} \;\; \forall (i,j) \in E \nonumber
%
\end{align}
\]</div>
<p>Note that constraints <span class="arithmatex">\(\eqref{eq_line_losses} - \eqref{eq_ohms_bfm}\)</span> replace <span class="arithmatex">\(\eqref{eq_power_from} - \eqref{eq_power_to}\)</span> but the remainder of the problem formulation is identical. Furthermore, the problems have the same feasible set.  </p>
<h3 id="mapping-to-powermodels-functions_1">Mapping to PowerModels Functions<a class="headerlink" href="#mapping-to-powermodels-functions_1" title="Permanent link">¶</a></h3>
<ul>
<li>Eq. <span class="arithmatex">\(\eqref{var_branch_current}\)</span> - <a href="@ref"><code class="highlight"><span class="n">variable_branch_current</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_line_losses}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_power_losses</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_series_power_flow}\)</span> - implicit, substituted out before implementation</li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_complex_power_definition}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_model_voltage</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_ohms_bfm}\)</span> - <a href="@ref"><code class="highlight"><span class="n">constraint_voltage_magnitude_difference</span></code></a></li>
</ul>
<h2 id="ac-optimal-power-flow-in-current-voltage-variables">AC Optimal Power Flow in Current-Voltage Variables<a class="headerlink" href="#ac-optimal-power-flow-in-current-voltage-variables" title="Permanent link">¶</a></h2>
<p>A variable <span class="arithmatex">\(I^{s}_{ij}\)</span>, representing the current in the direction <span class="arithmatex">\(i\)</span> to <span class="arithmatex">\(j\)</span>, through the series part of the pi-section, is used.
The mathematical structure for a current-voltage formulation is conceived as:</p>
<div class="arithmatex">\[
\begin{align}
%
\mbox{variables: } &amp; \nonumber \\
&amp; I^g_k \;\; \forall k\in G \nonumber \\
&amp; V_i \;\; \forall i\in N \nonumber \\
&amp; I^{s}_{ij} \;\; \forall (i,j) \in E \cup E^R  \mbox{ - branch complex (series) current}\\
&amp; I_{ij} \;\; \forall (i,j) \in E \cup E^R  \mbox{ - branch complex (total) current} \label{var_total_current}\\
%
\mbox{minimize: } &amp; \sum_{k \in G} c_{2k} (\Re(S^g_k))^2 + c_{1k}\Re(S^g_k) + c_{0k} \nonumber\\
%
\mbox{subject to: } &amp; \nonumber \\
&amp; \angle V_{r} = 0  \;\; \forall r \in R \nonumber \\
&amp; S^{gl}_k \leq \Re(V_i (I^g_k)^*) + j \Im(V_i (I^g_k)^*) \leq S^{gu}_k \;\; \forall k \in G   \label{eq_complex_power_definition_gen}\\
&amp; v^l_i \leq |V_i| \leq v^u_i \;\; \forall i \in N \nonumber\\
&amp; \sum_{\substack{k \in G_i}} I^g_k - \sum_{\substack{k \in L_i}} (S^d_k/V_i)^{*} - \sum_{\substack{k \in S_i}} Y^s_k V_i = \sum_{\substack{(i,j)\in E_i \cup E_i^R}} I_{ij} \;\; \forall i\in N  \label{eq_kcl_current} \\
&amp; I_{ij} =  \frac{I^{s}_{ij}}{T_{ij}^*} + Y^c_{ij} \frac{V_i}{|T_{ij}|^2}  \;\; \forall (i,j)\in E \label{eq_current_from} \\
&amp; I_{ji} = -I^{s}_{ij} + Y^c_{ji} V_j  \;\; \forall (i,j)\in E \label{eq_current_to} \\
&amp; \frac{V_i}{{T}_{ij}} = V_j + z_{ij} I^{s}_{ij}  \;\; \forall (i,j) \in E \label{eq_ohms_iv} \\
&amp; |S_{ij}| = |V_{i}| |I_{ij}| \leq s^u_{ij} \;\; \forall (i,j) \in E \cup E^R \nonumber\\
&amp; |I_{ij}| \leq i^u_{ij} \;\; \forall (i,j) \in E \cup E^R \nonumber\\
&amp; \theta^{\Delta l}_{ij} \leq \angle (V_i V^*_j) \leq \theta^{\Delta u}_{ij} \;\; \forall (i,j) \in E \nonumber
%
\end{align}
\]</div>
<h3 id="mapping-to-powermodels-functions_2">Mapping to PowerModels Functions<a class="headerlink" href="#mapping-to-powermodels-functions_2" title="Permanent link">¶</a></h3>
<ul>
<li>Eq. <span class="arithmatex">\(\eqref{var_total_current}\)</span> - total current flow into a branch on either end <a href="@ref"><code class="highlight"><span class="n">variable_branch_current</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_complex_power_definition_gen}\)</span>  - models active and reactive power range of a generator <a href="@ref"><code class="highlight"><span class="n">variable_gen_current</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_kcl_current}\)</span>  - Kirchhoff's current law in current variables  <a href="@ref"><code class="highlight"><span class="n">constraint_current_balance</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_current_from}\)</span>  - branch from-side current constraint in <a href="@ref"><code class="highlight"><span class="n">constraint_current_from</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_current_to}\)</span>  - branch to-side current constraint in <a href="@ref"><code class="highlight"><span class="n">constraint_current_to</span></code></a></li>
<li>Eq. <span class="arithmatex">\(\eqref{eq_ohms_iv}\)</span>  - Ohm's law <a href="@ref"><code class="highlight"><span class="n">constraint_voltage_drop</span></code></a></li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2022 Dr. Li Haifeng
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.tabs.linktheme", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "toc.integrate"], "search": "../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../assets/javascripts/bundle.a00a7c5e.min.js"></script>
<script src="../javascripts/mathjaxCFG.js"></script>
<script src="../MathJax/tex-chtml.js"></script>
<script src="../javascripts/refresh_on_toggle_dark_light.js"></script>
<script src="../javascripts/highlight.min.js"></script>
<script src="../javascripts/mermaid.min.js"></script>
<script src="../javascripts/wavedrom_unpkg.js"></script>
<script src="../javascripts/wavedrom_skin_default.js"></script>
</body>
</html>